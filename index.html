
<!DOCTYPE html>
<html>
<head>
	<!-- Standard Meta -->
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	<meta name="apple-mobile-web-app-capable" content="yes">		
   	<meta name="apple-mobile-web-app-status-bar-style" content="black">

	<!-- Site Properties -->
	<title>Tags</title>
	<link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.1/semantic.min.css">
	<style type="text/css">
	label.disabled { background-color:#eee; }
	.ui.label.blue.export { background-color:#006f88 !important; }
	.ui.ribbon.label { top: -0.5em; margin-bottom:5px; }
	.ui.inverted.custom.segment { background-color: #033c5d!important; color: #FFF!important; padding: 0.6em 1em; }
	.ui.inverted.dimmer { background-color: rgba(255,255,255,1); }

	.ui.label.icon>.icon { width: auto; margin: 0; }
	a.ui.label { margin: 0 2px 4px 0; }

	.hashtaggroup .movemessage,
	.hashtaggroup .deletemessage { display:none; }
	.hashtaggroup.movemode .movemessage,
	.hashtaggroup.deletemode .deletemessage { display:block; }
	.hashtaggroup.deletemode a.label:not(.actionlabel) { border-bottom: 2px solid rgba(154, 4, 4, 0.6) !important; }
	.hashtaggroup.deletemode a.label:not(.actionlabel):after { content: "\f00d"; font-family: Icons; padding-left:5px; }
	.hashtaggroup.movemode a.label:not(.actionlabel):after { content: "\f047"; font-family: Icons; padding-left:5px; }
	.hashtaggroup .header { margin: 0 0 5px 0 !important; display:block; }
	.hashtaggroup.segment { padding: 10px 10px 7px; }
	.hashtaggroup.folded .tagwrapper,
	.hashtaggroup.folded .button.actionbutton { display:none; }
	.emptymessage { display:table; }
	.ui.menu .item>i.dropdown.icon { margin:0; }

	

	.ui.right.floated.menu { position: absolute; top: 5px; right: 15px; }

	html, body {height: 100%;}
	main { padding-bottom: 300px; padding-top: 50px; }
 	#wrap {min-height: 100%;}
 	footer { position: fixed; z-index:100; bottom: 0; left: 0; right:0; clear:both; background-color:#fff; border-top:1px solid #999; box-shadow: 0 0 10px rgba(0,0,0,0.3); }
 	header { position: fixed; z-index:100; top: 0; left: 0; right:0; clear:both; background-color:#033c5d!important; color:#fff; border-bottom:1px solid #000; box-shadow: 0 0 10px rgba(0,0,0,0.8); }

	</style>
	<script type="text/javascript" src="https://cdn.jsdelivr.net/lodash/4.16.4/lodash.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.5.13/clipboard.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.0/knockout-min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout.mapping/2.4.1/knockout.mapping.min.js" integrity="sha256-gaGobNk1cPaj0abcVmyZxUYgCPsueCJwN5i4DjC4BS0=" crossorigin="anonymous"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.1/semantic.min.js"></script>
	<script type="text/javascript">
	$(document).ready(function() {
		var mockViewmodel = function() {

			var self = this;

			self.debugMode = ko.observable(true);
			self.log = function(message) {
				if (self.debugMode()) {
					console.log(message);
				}
			};

			self.colorArray = ["red","orange","yellow","olive","green","teal","blue","violet","purple","pink","brown","grey","black"]

			self.groupFilters = ["_Captures", "BNS_", "Pocket_"];

			// Class for creating tags
			self.TAG = function(tag) {
				this.name = tag;
				this.isActive = ko.observable(false);
			};

			self.storedTags = [{
					name : "Special tags",
					color: 'blue',
					isFolded : ko.observable(false),
					hashtags : ko.observableArray([
						new self.TAG("OlympusOMD"),
						new self.TAG("em5markii"),
						new self.TAG("OmdEm5MarkII"),
						new self.TAG("Olympus"),
						new self.TAG("OlympusCamera"),
						new self.TAG("OlympusSverige"),
						new self.TAG("GetOlympus"),
						new self.TAG("ig_Mirrorless"),
						new self.TAG("All_My_Own"),
						new self.TAG("ig_MyShot"),
						new self.TAG("TV_Monotones"),
						new self.TAG("TV_Foggy"),
						new self.TAG("minimalmood"),
						new self.TAG("ig_world_photo"),
						new self.TAG("ig_world_global"),
						new self.TAG("bnw_planet"),
						new self.TAG("bnw_legit"),
						new self.TAG("wonderful_places"),
						new self.TAG("EarthFocus"),
						new self.TAG("BeautifulDestinations"),
						new self.TAG("agameoftones"),
						new self.TAG("natgeotravel")
					])
				}, {
					name : "Uppsala",
					color: 'teal',
					isFolded : ko.observable(false),
					hashtags : ko.observableArray([
						new self.TAG("MyUppsala"),
						new self.TAG("Uppsala"),
						new self.TAG("UppsalaCity"),
						new self.TAG("alltljuspåuppsala"),
						new self.TAG("alltljuspåuppsala2016"),
						new self.TAG("CaptiolOfScandinavia")
					])
				}, {
					name : "Sweden & Scandinavia",
					color: 'teal',
					isFolded : ko.observable(false),
					hashtags : ko.observableArray([
						new self.TAG("Sweden"),
						new self.TAG("Sverige"),
						new self.TAG("VisitSweden"),
						new self.TAG("SwedishMoments"),
						new self.TAG("Loves_Sweden"),
						new self.TAG("ig_sweden"),
						new self.TAG("igSweden"),
						new self.TAG("Sweden_PhotoLovers"),
						new self.TAG("BestOfScandinavia"),
						new self.TAG("igScandinavia"),
						new self.TAG("wu_Sweden"),
						new self.TAG("iAmNordic"),
						new self.TAG("OnlyInScandinavia"),
						new self.TAG("UnlimitedScandinavia"),
						new self.TAG("TheBestOfScandinavia"),
						new self.TAG("Schweden"),
						new self.TAG("Excellent_Nordic"),
						new self.TAG("Pocket_Sweden"),
						new self.TAG("DiscoverSwe"),
						new self.TAG("SwedenShots"),
						new self.TAG("SwedenImages"),
						new self.TAG("BNW_Sweden")	
					])
				}, {
					name : "Landscape & Nature",
					color: 'green',
					isFolded : ko.observable(false),
					hashtags : ko.observableArray([
						new self.TAG("Landscape_Lovers"),
						new self.TAG("Landscape_Captures"),
						new self.TAG("LandscapePhotography"),
						new self.TAG("NatureLovers"),
						new self.TAG("NatureGram"),
						new self.TAG("Nature_Perfection"),
						new self.TAG("Nature_Brilliance"),
						new self.TAG("BestNatureShots "),
						new self.TAG("HeartNature"),
						new self.TAG("InstaNatureFriends"),
						new self.TAG("MotherNature"),
						new self.TAG("FiftyShades_Of_Nature"),
						new self.TAG("AllNatureShots"),
						new self.TAG("AllWhatsBeautiful"),
						new self.TAG("Reflection_Perfection"),
						new self.TAG("Country_Features"),
						new self.TAG("ig_Countryside"),
						new self.TAG("AwesomeEarth"),
						new self.TAG("Awesome_EarthPix"),
						new self.TAG("Animazing_Nature"),
						new self.TAG("EarthBestShot"),
						new self.TAG("PictureToKeep_Nature"),
						new self.TAG("PhotoArena_Nature"),
						new self.TAG("Landscape_Specialist"),
						new self.TAG("LandscapeHunter"),
						new self.TAG("NaturePhotography"),
						new self.TAG("NatureAddict"),
						new self.TAG("NatureOnly"),
						new self.TAG("Nature_Shooters"),
						new self.TAG("Natureza"),
						new self.TAG("Loves_Reflections"),
						new self.TAG("BNS_Reflection"),
						new self.TAG("IC_Reflections"),
						new self.TAG("CloudPorn"),
						new self.TAG("EarthDeluxe"),
						new self.TAG("FantasticEarth"),
						new self.TAG("Pocket_AllNature"),
						new self.TAG("FineArtNature"),
						new self.TAG("Reflectiongram"),
						new self.TAG("Wonderful_Places"),
						new self.TAG("ig_Bliss"),
						new self.TAG("Infinity_WorldShoot"),
						new self.TAG("Worlds_Beautiful_Photos"),
						new self.TAG("Eart_Shotz"),
						new self.TAG("ig_World_Colors"),
						new self.TAG("ig_Serenity"),
						new self.TAG("ig_Dynamic"),
						new self.TAG("NatureRomantix"),
						new self.TAG("igWorld_Global"),
						new self.TAG("Master_Gallery"),
						new self.TAG("CaptureLandscapes")
					])
				},{
					name : "Trees",
					color: 'olive',
					isFolded : ko.observable(false),
					hashtags : ko.observableArray([
						new self.TAG("Tree_Captures"),
						new self.TAG("Pocket_Trees"),
						new self.TAG("BNS_Trees"),
						new self.TAG("TreeScape"),
						new self.TAG("Trees"),
						new self.TAG("ww_Nature_Trees")
					])
				}, {
					name : "Popular",
					color: 'orange',
					isFolded : ko.observable(false),
					hashtags : ko.observableArray([
						new self.TAG("VSCO"),
						new self.TAG("WatchThisInstagood"),
						new self.TAG("LiveFolk"),
						new self.TAG("ArtOfVisuals"),
						new self.TAG("VisualsOfLife"),
						new self.TAG("VisualsCollective"),
						new self.TAG("LiveAuthentic"),
						new self.TAG("WeLiveToExplore"),
						new self.TAG("MoodyGrams"),
						new self.TAG("igMood"),
						new self.TAG("Jaw_Dropping_Shots"),
						new self.TAG("ig_Great_Pics"),
						new self.TAG("PicOfTheDay"),
						new self.TAG("OurPlanetDaily"),
						new self.TAG("colors_of_day"),
						new self.TAG("BestCaptureGlobal"),
						new self.TAG("UnlimitedPlanet"),
						new self.TAG("FotoFanatics"),
						new self.TAG("GetOutside"),
						new self.TAG("ig_Great_Shots"),
						new self.TAG("WorldBestGram"),
						new self.TAG("WorldPrime"),
						new self.TAG("igWorld_Global"),
						new self.TAG("Superb_Photos"),
						new self.TAG("OurMoodyDays"),
						new self.TAG("Incredible_Shot"),
						new self.TAG("IgersMood"),
						new self.TAG("ShotzDelight"),
						new self.TAG("FotoCatchers"),
						new self.TAG("Hubs_United"),
						new self.TAG("ig_MasterPiece"),
						new self.TAG("GreatNorthCollective"),
						new self.TAG("Exeptional_Pictures"),
						new self.TAG("Amazing_fs"),
						new self.TAG("CurateThis1X")
					])
				}, {
					name : "Norrsken",
					color: 'red',
					isFolded : ko.observable(false),
					hashtags : ko.observableArray([
						new self.TAG("NorthernLights"),
						new self.TAG("AuroraBorealis"),
						new self.TAG("Aurora"),
						new self.TAG("Norrsken"),
						new self.TAG("WorldAurora"),
						new self.TAG("AuroraBorealBlog")
					])
				}, {
					name : "Astrophotography",
					color: 'black',
					isFolded : ko.observable(false),
					hashtags : ko.observableArray([
						new self.TAG("NightScape"),
						new self.TAG("NightPhotography"),
						new self.TAG("NightScaper"),
						new self.TAG("LongexpoElite"),
						new self.TAG("AstroPhotography"),
						new self.TAG("StarryNight"),
						new self.TAG("NightShooters"),
						new self.TAG("SkyMasters"),
						new self.TAG("Sky_Brilliance"),
						new self.TAG("SkyMasters_Family"),
						new self.TAG("Sky_Captures"),
						new self.TAG("MilkyWay"),
						new self.TAG("Stargazer"),
						new self.TAG("InstaSky"),
						new self.TAG("AstroScape"),
						new self.TAG("Pocket_Sky"),
						new self.TAG("Long_Exposure"),
						new self.TAG("Long_Exposure_Pics"),
						new self.TAG("World_BestSky"),
						new self.TAG("NightImages"),
						new self.TAG("Night_Captures"),
						new self.TAG("igWorldClub_Longexp"),
						new self.TAG("LongExpo_Addiction"),
						new self.TAG("LongExposurePhotography"),
						new self.TAG("LazyShutters"),
						new self.TAG("ShutterSpeec"),
						new self.TAG("LowLight")
					])
				},{
					name : "Winter",
					color: 'grey',
					isFolded : ko.observable(false),
					hashtags : ko.observableArray([
						new self.TAG("Frozen"),
						new self.TAG("Pocket_Frozen"),
						new self.TAG("InstaWinter"),
						new self.TAG("PrayForSnow"),
						new self.TAG("SnowPerfection"),
						new self.TAG("Snow"),
						new self.TAG("WinterTime")

					])
				},{
					name : "Lighthouse & Sea",
					color: 'grey',
					isFolded : ko.observable(false),
					hashtags : ko.observableArray([
						new self.TAG("BNS_Waters"),
						new self.TAG("Pocket_Waters"),
						new self.TAG("Water_Brilliance"),
						new self.TAG("Water_Captures"),
						new self.TAG("Loves_United_Water"),
						new self.TAG("SeaScape"),
						new self.TAG("Lighthouse"),
						new self.TAG("Lighthouse_Captures"),
						new self.TAG("Lighthouses_Windmills_gs")
					])
				},{
					name : "Cityscape & Street",
					color: 'grey',
					isFolded : ko.observable(false),
					hashtags : ko.observableArray([
						new self.TAG("StreetView_Sweden"),
						new self.TAG("Streets_OfTheWorld"),
						new self.TAG("BestCityBreaks"),
						new self.TAG("Great_Captures_City"),
						new self.TAG("ScandinavianTravels"),
						new self.TAG("TravellingThroughTheWorld"),
						new self.TAG("igWorldClub_Street"),
						new self.TAG("City_Captures")
					])
				}
			];

			self.runJQScripts = function(context, delay) {
				setTimeout(function() {
					$('a[title]', $(context)).popup({silent: true});
					$('.ui.dropdown', $(context)).dropdown({silent: true});
				}, delay);
			};

			// This holds the hashtags
			self.hashtags = ko.observableArray([]);

			// Map objects from JSON and set knockout observables
			self.getStorage = function() {
				self.log("self.getStorage();");
				var fromJSON = JSON.parse(localStorage.getItem("hashtags"));
				// Map back to objects with observable
				_.forEach(fromJSON, function(item) {
					item.isFolded = ko.observable(item.isFolded);
					_.forEach(item.hashtags, function(hashtagItem) {
						hashtagItem.isActive = ko.observable(item.isActive);
					});
					item.hashtags = ko.observableArray(item.hashtags);
				});
				self.hashtags(fromJSON);
				self.hashtags.valueHasMutated();
				self.runJQScripts("section.segments", 200);
			};

			// Store hashtags as JSON
			self.setStorage = function() {
				self.log("self.setStorage();");
				localStorage.setItem("hashtags", ko.toJSON(ko.mapping.toJS(self.hashtags)));
			};

			self.setStoredTags = function() {
				self.log("self.setStoredTags();");
				self.hashtags(self.storedTags);
				self.runJQScripts("section.segments", 200);
			};

			self.initHashtags = function() {
				self.log("self.initHashtags();");
				if (localStorage.getItem("hashtags") !== "null") {
					self.getStorage();
				} else {
					self.setStoredTags();
				}
			};

			// Set hashtags from localstorage or from storedTags?
			self.initHashtags();

			self.hashtagizer = function(tag) {
				return '#' + tag;
			}

			self.capitalize = function(stringInput) {
				return stringInput.charAt(0).toUpperCase() + stringInput.slice(1);
			};

			self.toggleAll = function(arrayRef, parent, state) {
				_.forEach(arrayRef(), function(value) {
					if (state) {
						self.tagAction(value, parent);
					} else {
						self.removeTag(value);
					}
				});
			};

			self.exportTags = ko.observableArray([]);
			self.exportTagsForCopy = ko.computed(function() {
				var result = [];
				var cnt = 0;
				_.forEach(self.exportTags(), function(value) {
					result.push(self.hashtagizer(value.name.toLowerCase()) + ' ');
					cnt++;
					if (cnt % 2 === 0) {
						result.push('\n');
					}
				});
				return result.join('');
			}, this);

			self.saveExportTags = function() {
				var saveTags = ko.toJSON(ko.mapping.toJS(self.exportTags));
				var itemToSave = {
					date : new Date(),
					name : "test",
					hashtags : saveTags
				};
				console.log(itemToSave);
				$('footer .segment').dimmer('show').find(":input:text").focus();
				console.log(saveTags);
			};

			self.removeAllExportTags = function() {
				_.forEach(self.exportTags(), function(value) {
					self.removeTag(value);
				});
			}

			self.orderAsc = ko.observable(false);
			self.sortExportTags = function() {
				self.orderAsc(!self.orderAsc());
				self.exportTags(_.orderBy(self.exportTags(), ['name'], [self.orderAsc() ? 'asc' : 'desc']));
			};


			self.deleteModeActivated = ko.observable(false);
			self.deleteTagsInGroupName = ko.observable('');
			self.activeHashtagGroup = ko.observable(null);

			self.tagAction = function(tag, parent) {
				if (parent.name === self.deleteTagsInGroupName() && self.deleteModeActivated()) {
					parent.hashtags(_.without(parent.hashtags(), tag));
					if (!parent.hashtags().length) {
						self.deleteModeActivated(false);
						self.deleteTagsInGroupName('');
						$(".hashtaggroup.deletemode").removeClass("deletemode");
					}
					self.setStorage();
					return false;
				}
				if (_.indexOf(self.exportTags(), tag) === -1) {
					tag.isActive(true);
					if (!self.moveModeActivated()) {
						self.exportTags().push(tag);
						self.exportTags(_.uniqBy(self.exportTags(), 'name'));
						self.exportTags.valueHasMutated();
						self.setStorage();
					}
				}
			}

			self.removeTag = function(tag) {
				self.log("self.removeTag ();");
				tag.isActive(false);
				self.exportTags(_.without(self.exportTags(), tag));
				self.exportTags.valueHasMutated();
			};

			self.showCreateTagForm = function(item, event) {
				$(event.target).closest('.segment').dimmer('show');
				$(event.target).closest('.segment').find(":input:text").focus();
			}

			self.saveNewHashtag = function(item, event) {
				var newHastag = new self.TAG($(event.target).siblings(':input:text').val());
				item.hashtags().push(newHastag);
				item.hashtags.valueHasMutated();
				$(event.target).siblings(':input:text').val("").closest('.segment').dimmer('hide');
			};

			self.createGroupIsActivated = ko.observable(false);

			self.toggleCreateGroup = function(item, event) {
				self.createGroupIsActivated(true);
			};

			self.foldGroup = function(item, event) {
				if (self.moveModeActivated() && !_.isEqual(item, self.activeHashtagGroup())) {
					var pullArray = [];
					_.forEach(self.activeHashtagGroup().hashtags(), function(value) {
						if (value.isActive()) {
							value.isActive(false);
							pullArray.push(value);
						};
					});

					// Remove pulled items from active group and union pulled item with target group
					self.activeHashtagGroup().hashtags(_.pullAllWith(self.activeHashtagGroup().hashtags(), pullArray));
					item.hashtags(_.union(item.hashtags(), pullArray));

					self.toggleMoveMode(item);
				} else {
					item.isFolded(!item.isFolded());
				}
			};

			self.setTagClass = function(item, parent) {
				if (item.isActive()) {
					return 'basic disabled';
				} else {
					return parent.color;
				}
			}

			self.isAllGroupToggled = ko.observable(false);
			self.toggleAllGroups = function() {
				self.isAllGroupToggled(!self.isAllGroupToggled());
				_.forEach(self.hashtags(), function(value) {
					value.isFolded(self.isAllGroupToggled());
				});
			};

			self.saveNewGroup = function() {
				self.hashtags().push({
					name : $("#groupName").val(),
					color : $("#color").val(),
					isFolded : ko.observable(false),
					hashtags : ko.observableArray([])
				});
				self.hashtags.valueHasMutated();
				self.createGroupIsActivated(false);
			};

			self.deleteGroup = function(item, event) {
				self.hashtags(_.without(self.hashtags(), item));
				self.setStorage();
			};

			self.moveModeActivated = ko.observable(false);
			self.toggleMoveMode = function(item, event) {
				self.moveModeActivated(!self.moveModeActivated());
				self.deleteTagsInGroupName(self.moveModeActivated() ? item.name : '');
				self.activeHashtagGroup(self.moveModeActivated() ? item : null);
				if (self.moveModeActivated()) {
					$(event.target).closest(".hashtaggroup").addClass("movemode");
				} else {
					$(".hashtaggroup.movemode").removeClass("movemode");
				}
				
			}

			self.toggleDeleteMode = function(item, event) {
				self.deleteModeActivated(!self.deleteModeActivated());
				self.deleteTagsInGroupName(self.deleteModeActivated() ? item.name : '');
				self.activeHashtagGroup(item);
				$(event.target).closest(".hashtaggroup").toggleClass("deletemode", self.deleteModeActivated());
			}

			self.afterRender = function() {
				self.runJQScripts(document.body, 1000);
				new Clipboard('#copy-button');
			};
		};

		

	    window.mockViewmodel = new mockViewmodel();
	    ko.applyBindings(window.mockViewmodel);

	    setTimeout(function() {
	    	window.mockViewmodel.afterRender();
	    }, 700);

	});
	</script>
</head>
<body>
<div id="wrap">

	<header>
		<div class="ui custom inverted segment">	
			<div class="ui grid">
				<div class="eleven wide column">
					<h2 class="ui icon">
					  	<i class="icon instagram"></i> Instatags
					</h2>
				</div>
				<div class="five wide column">
					<button class="ui small basic inverted right floated icon button" data-bind="click : function() { $root.createGroupIsActivated(!$root.createGroupIsActivated()); }"><i class="plus icon"></i> Group</button>
				</div>
			</div>
		</div>
	</header>

	<main class="ui container">

		<div class="ui attached message info" data-bind="visible : createGroupIsActivated()">
			<h3>Create a new hashtag group</h3>
			<div class="ui form">
				<div class="field">
					<div class="ui left icon input">
						<i class="archive icon"></i>
						<input type="text" placeholder="Name the group..." id="groupName" data-bind="hasfocus : createGroupIsActivated()">
					</div>
				</div>

				<div class="field">
					<div class="ui fluid search selection dropdown">
						<input type="hidden" name="color" id="color">
						<i class="dropdown icon"></i>
						<div class="default text"><span class="ui empty circular grey label"></span> Pick a color</div>
						<div class="menu">
							<!-- ko foreach: colorArray-->
							<div class="item" data-bind="attr : { 'data-value' : $data }">
								<span class="ui empty circular label" data-bind="css : $data"></span>
								<span data-bind="text : $root.capitalize($data)"></span>
							</div>
							<!-- /ko -->
						</div>
					</div>
				</div>

				<button class="ui green icon button" data-bind="click: function() { $root.saveNewGroup(); }"><i class="icon save"></i> Save</button>
				<button class="ui icon button" data-bind="click : function() { $root.createGroupIsActivated(!$root.createGroupIsActivated()); }"><i class="icon close"></i> Cancel</button>
			</div>
		</div>

	<section class="ui top attached segments">
		<!--
		<div class="ui mini basic two top attached buttons">
			<a href="#" data-bind="click: $root.toggleAllGroups" class="ui mini icon button">
				<i class="icon retweet"></i>
				Toggle all groups
			</a>
			<a href="#" data-bind="click: $root.toggleAllGroups" class="ui mini icon button">
				<i class="icon retweet"></i>
				Toggle all groups
			</a>
		</div>
		-->

		<!-- ko foreach: hashtags -->
		<section class="ui hashtaggroup" data-bind="css : ' segment ' + ($data.isFolded() ? 'folded' : '')">

			<div class="ui right floated right pointing dropdown icon button mini basic actionbutton">
	        	<i class="icon setting"></i>
				<i class="dropdown icon"></i>
		        
		        <div class="menu vertical hidden">
			    	<a class="item" href="#" data-bind="click: $root.toggleDeleteMode"><i class="icon mouse pointer"></i> Remove tags by click</a>
			    	<a class="item" href="#" data-bind="click: $root.toggleMoveMode"><i class="icon move"></i> Move tags</a>
			    	<a class="item" href="#" data-bind="click: $root.deleteGroup"><i class="icon trash"></i> Delete group</a>
			  	</div>
	      	</div>

			<a href="#" class="header" data-bind="css : $data.color, click : $root.foldGroup">
				<!--<i class="icon archive" data-bind="css : $data.color"></i>-->
				<i class="icon square" data-bind="css : $data.isFolded() ? 'add' : 'minus'"></i>
				<strong data-bind="text : $data.name"></strong> 
				(<span data-bind="text : $data.hashtags().length">0</span>) 
			</a>

			<div class="ui inverted dimmer">
				<div class="content">
					<div class="center">
						<form class="ui form">
							<div class="ui internally celled grid">
								<div class="row">
									<div class="column">
										<div class="ui fluid right action left icon input">
											<i class="tag icon"></i>
											<input type="text" placeholder="Create a new tag...">
											<button class="ui teal right labeled icon button" data-bind="click: $root.saveNewHashtag"><i class="plus icon"></i> Save</button>
										</div>
									</div>
								</div>
							</div>
						</form>
					</div>
				</div>
			</div>

			<div class="tagwrapper">
		    	<!-- ko foreach: $data.hashtags -->
				<a class="ui label" data-bind="html: $root.hashtagizer($data.name), click : function() { $root.tagAction($data, $parent); }, css : $root.setTagClass($data, $parent) "></a>
				<!-- /ko -->
				<!-- ko if: !$data.hashtags().length -->
				<div class="ui mini success message emptymessage">
				  	<i class="icon idea"></i>
				  	No tags in this group yet. Start creating tags by clicking the button with a plus sign below.
				</div>
				<!-- /ko -->
				<a class="ui icon basic label actionlabel" title="Create new tag" href="#" data-bind="click : $root.showCreateTagForm"><i class="icon plus"></i></a>
				<a class="ui icon basic label actionlabel" title="Add all tags to selected" href="#" data-bind="click : function() { $root.toggleAll($data.hashtags, $parent, true); }"><i class="icon sort content ascending"></i></a>
				<a class="ui icon basic label actionlabel" title="Remove all tags from selected" href="#" data-bind="click : function() { $root.toggleAll($data.hashtags, $parent, false); }"><i class="icon reply all"></i></a>
			</div>

			<div class="ui negative message deletemessage">
				<i class="icon close" data-bind="click: $root.toggleDeleteMode"></i>
		      	<div class="header"><i class="icon mouse pointer"></i> Click on the hashtags above that you want to delete | <a href="#" data-bind="click: $root.toggleDeleteMode">Cancel</a></div>
		    </div>

		    <div class="ui info message movemessage">
				<i class="icon close" data-bind="click: $root.toggleMoveMode"></i>
				<div class="header">Move hashtags between groups | <a href="#" data-bind="click: $root.toggleMoveMode">Cancel</a></div>
				<i class="icon mouse pointer"></i> Select tags by clicking<br>
				<i class="icon folder open"></i> Click on a group title to move hashtags to that group<br>
		    </div>

	  	</section>
		<!-- /ko -->

		<div class="ui mini basic one bottom attached buttons">
			<a href="#" data-bind="click: $root.toggleAllGroups" class="ui mini icon button">
				<i class="icon retweet"></i>
				Toggle all groups
			</a>
		</div>
	</section>



	</main>

</div>

<footer>
	<div class="ui basic segment">
		<h5><i class="icon tags"></i> Selected hashtags (<b data-bind="text : exportTags().length">0</b>)</h5>

		<div class="ui mini right floated main menu">
	        <a class="popup icon item" href="#" data-bind="click : function() { $root.sortExportTags(); }"><i class="icon sort alphabet ascending"></i></a>
	        <a class="popup icon item" href="#" data-bind="click : function() { $root.removeAllExportTags(); }"><i class="icon level up"></i></a>
	        <div class="ui right bottom pointing dropdown link item">
	        	<i class="icon archive"></i>
				<i class="dropdown icon"></i>
		        
		        <div class="menu vertical hidden">
		        	<a class="item" href="#" data-bind="click: $root.setStoredTags"><i class="icon recycle"></i> Start from scratch</a>
			    	<a class="item" href="#" data-bind="click: $root.saveExportTags"><i class="icon save"></i> Save selected hashtags</a>
			    	<a class="item" href="#" data-bind="click: $root.deleteGroup"><i class="icon trash"></i> Delete group</a>
			  	</div>
	      	</div>
      	</div>

      	<div style="max-height: 150px; overflow: auto; margin-bottom:10px;">
			<!-- ko foreach: exportTags -->
			<a class="ui blue label export" data-bind="html: $root.hashtagizer($data.name) + ' <i class=\'icon close\'></i>', click : function() { $root.removeTag($data); }"></a>
			<!-- /ko -->
		</div>

		<div class="ui inverted dimmer">
			<div class="content">
				<div class="center">
					<form class="ui form">
						<div class="ui internally celled grid">
							<div class="row">
								<div class="column">
									<div class="ui fluid right action left icon input">
										<i class="tag icon"></i>
										<input type="text" placeholder="Create a new tag...">
										<button class="ui teal right labeled icon button" data-bind="click: $root.saveNewHashtag"><i class="plus icon"></i> Save</button>
									</div>
								</div>
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>

		<div class="ui form">
			<div class="ui fluid action input">
			  	<textarea data-bind="value: exportTagsForCopy" id="tagsforexport" rows="1"></textarea>
			  	<button id="copy-button" class="ui teal icon button" data-clipboard-target="#tagsforexport">
			    	<i class="copy icon"></i>
			 	</button>
			</div>
		</div>
	</div>
</footer>
</body>
</html>
